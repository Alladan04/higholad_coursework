# Проектирование высоконагруженной системы на примере eBay
## Содержание
1. [Тема и целевая аудитория](#1-тема-и-целевая-аудитория)
   1. [Основной функционал сервиса](#основной-функционал-сервиса)
   2. [Целевая аудитория](#целевая-аудитория)
   3. [Основные продуктовые решения](#основные-продуктовые-решения)
2. [Расчет нагрузки](#2-расчет-нагрузки)
3. [Использованные ресурсы](#использованные-ресурсы)
## 1. Тема и целевая аудитория
**eBay** - американская компания, предоставляющая услуги в областях 
интернет-аукционов и интернет-магазинов. Основан в 1995 году как первая в мире площадка 
для проведения интернет аукционов. С тех пор сервис активно развивается и на данный момент является
одним из крупнейших маркетплейсов.
### Основной функционал сервиса
* Лента объявлений
* Поиск объявлений
* Работа с объявлением (создание,просмотр, редактирование, удаление)
* Модерация объявлений
* Рейтинг продавца
* Статитстика продаж
* Купить товар
* Участвовать в аукционе (сделать ставку)
### Целевая аудитория

По данным с [hypestat](https://hypestat.com/info/ebay.com) и [отчетов ebay.com](https://investors.ebayinc.com/overview/default.aspx):
* 632+ млн посещений в месяц
* 132 млн активных покупателей (активными считаются покупатели, которые совершили хотя бы 1 покупку в предыдущие 12 месяцев)
* 20+ млн посещений в день
* 146+ млн страниц просматривается посетителями ежедневно
* Основная часть покупателей сервиса (≈81%) находится в США
* 18 млн активных продавцов (активными считаются продавцы, которые опубликовали хотя бы 1 объявление за предыдущие 12 месяцев)
* 2+ млрд активных объявлений

### Основные продуктовые решения:
* Главная модель совершения сделок - аукцион.
* Альтернативная модель совершения сделок в виде функции "Купить сейчас".
* Рекомендательная система на основе действий, совершенных пользователем ранее.
## 2. Расчет нагрузки
### Продуктовые метрики
Метрика      | Значение
-------------| -------------
Месячная аудитория MAU        | 630 млн. пользователей
Дневная аудитория DAU         | 20 млн. пользователей

### Средний размер хранилища пользователя
Будем считать, что в месяц публикуется порядка 150млн объявлений (на 2008г было 105млн)
В год у нас 18млн активных продавцов => в месяц один продавец публикует 100 объявлений
Каждое объявление состоит из фотографий (в среднем 4 на 1 объявление) и из описания. Каждое фото
весит порядка 70кБ, описание  и другие данные (дата, стоимость, локация, версионирование) порядка 1кБ => на хранение 1 объявления
нужно 4 * 70 + 1 = 281 кБ
Таким образом на 1 продавца приходится 281кБ * 100 = 28 100кБ ≈ 27МБ памяти в месяц

Пользователи посещают сайт 632млн раз в месяц,за каждое посещение они открывают порядка 6 страниц
90% этого трафика - покупатели
пусть 30% всех совершенных пользователями дейтствий являются целевыми - клик по объявлению,добавление в избранное, покупка

Таким образом покупатели создают 632 * 0,9 * 6 * 0,3 = 1024млн действий, каждое из которых записывается и собирается как статистика
просмотров/продаж для продавца каждое действие создает данных до 100 байт =>
каждый месяц записывается 100 * 1024млн= 102Гб статистичесикх данных от покупателей



## Использованные ресурсы:
1. https://hypestat.com/info/ebay.com
2. https://www.ebayinc.com/company/
3. https://investors.ebayinc.com/overview/default.aspx
